# 面向对象的设计原则

## 单一职责原则SRP

一个类只负责一个功能领域中的相应职责，用于实现高内聚、低耦合。

在软件系统中，一个类承担的职责越多，被复用的可能性越小，且职责耦合在一起，当其中一个职责变化时，可能会影响其他职责的运作。

## 开闭原则

软件实体应该尽量在不修改原有代码的情况下进行扩展。

软件实体：软件模块、多个类组成的局部结构、一个类。

抽象化是开闭原则的关键，可以定义一个相对稳定的抽象层，将不同的实现行为移至具体的实现层中完成。eg.接口、抽象类

扩展的方式是增加类来继承抽象类或实现接口。

扩展时只对xml和properties等格式的配置文件进行修改，系统仍然符合开闭原则。

## 里氏代换原则

所有引用父类的地方必须能透明使用其子类的对象；父类对象替换为子类对象，程序不会出现异常；子类对象一般不能替换为父类对象，除非是重载方法。

里氏代换原则是实现开闭原则的重要方法。

方法中传递参数、定义成员变量、定义局部变量、确定方法返回类型都可以使用里氏代换原则。

### 使用里氏代换原则的注意问题

1.子类中所有方法必须在父类中声明

若有父类中没声明但在子类中出现的方法，无法用父类定义的对象调用该方法。

2.尽量把父类设计为抽象类或接口，子类继承父类 或实现接口，增加功能可以通过增加新子类--实现开闭原则

3.java编译器会在编译阶段检查程序是否符合里氏代换原则（有局限性）

## 依赖倒转原则

要针对接口编程，不是针对实现编程。

使用接口和抽象类进行变量类型声明、参数类型声明、方法返回类型声明、数据类型转换等，具体类应该只实现接口或抽象类中声明过的方法，否则无法通过父类对象调用子类新增方法。

在程序中使用抽象层进行编程，具体类写在配置文件中，切换具体类时只需修改配置文件，新增具体类只需添加抽象类的子类和修改配置文件，无需修改源代码，满足开闭原则。

实现依赖倒转原则时，要针对抽象层编程，具体类对象要通过依赖注入DI方式注入到其他对象中。

依赖注入DI：当一个对象要与其他对象发生依赖关系时，通过抽象来注入所依赖的对象。

依赖注入方法：构造注入、setter注入、接口注入

开闭原则是目标，里氏代换原则是基础，依赖倒转原则是手段，这三个设计原则往往同时出现。

## 接口隔离原则ISP

使用多个专门的接口，而不使用单一的总接口。

接口的粒度太小，系统中接口泛滥，不利于维护；接口粒度太大，灵活性较差，客户端会依赖不需要的方法，封装性较差。

### 接口的两种含义

1.一个类型所具有的方法特征的集合

一个接口只能代表一个角色，可以称为“角色隔离原则”。

2.特定语言的接口

Java中的interface等接口仅提供客户端需要的行为，隐藏客户端不需要的行为；需要将大接口的方法根据职责不同细分为小接口，每个接口包含为某一类用户定制的方法即可。--定制服务

## 合成复用原则CARP

尽量使用对象组合，而不是继承达到复用目的。



